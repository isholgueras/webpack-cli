"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[834],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=i,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(f,o(o({ref:t},c),{},{components:n})):r.createElement(f,o({ref:t},c))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var s=2;s<a;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},747:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=n(7462),i=(n(7294),n(3905));const a={title:"allExternalPeerDependencies",sidebar_position:4},o="allExternalPeerDependencies: Object",l={unversionedId:"registry/config/options/allExternalPeerDependencies",id:"registry/config/options/allExternalPeerDependencies",title:"allExternalPeerDependencies",description:"The actual TS type for this property is:",source:"@site/docs/registry/config/options/allExternalPeerDependencies.md",sourceDirName:"registry/config/options",slug:"/registry/config/options/allExternalPeerDependencies",permalink:"/webpack-cli/docs/registry/config/options/allExternalPeerDependencies",draft:!1,editUrl:"https://github.com/js-widgets/webpack-cli/edit/main/website/docs/registry/config/options/allExternalPeerDependencies.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"allExternalPeerDependencies",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"webpackFinal",permalink:"/webpack-cli/docs/registry/config/options/webpackFinal"},next:{title:"1.2. Widget Definition",permalink:"/webpack-cli/docs/registry/widget-definition"}},p={},s=[{value:"Examples",id:"examples",level:2}],c={toc:s},d="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"allexternalpeerdependencies-object"},(0,i.kt)("inlineCode",{parentName:"h1"},"allExternalPeerDependencies"),": ",(0,i.kt)("inlineCode",{parentName:"h1"},"Object")),(0,i.kt)("p",null,"The actual TS type for this property is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"Record<string, { src: string; external: External; }>\n")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://webpack.js.org/configuration/externals"},"Externals")," are a technique in Webpack to defer bundling certain dependencies with the rest of the widget. This is useful for dependencies that are very common. This way you can have five widgets embedded in a single page, and download, parse and execute ReactDOM (for instance) only once."),(0,i.kt)("p",null,"To be successful this technique requires the CMS and the widget to have matching configuration. To this end, the compiler, internally, will do two things:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Tell Webpack to not include the listed dependencies in the JS bundle for the widget."),(0,i.kt)("li",{parentName:"ul"},"Leave some additional configuration in the ",(0,i.kt)("inlineCode",{parentName:"li"},"registry.json"),". Later on, the CMS will ingest this, and will know to add the dependency to the page whenever this widget is embedded.")),(0,i.kt)("p",null,"The registry configuration will declare all the dependencies that may be externalized. Then each ",(0,i.kt)("a",{parentName:"p",href:"../../widget-definition"},"widget definition file")," will choose which ones are applicable to each widget."),(0,i.kt)("p",null,"For each dependency you will need to provide:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The name of the module for the key of the object. This is the name from the import (",(0,i.kt)("inlineCode",{parentName:"li"},"lodash"),"): ",(0,i.kt)("inlineCode",{parentName:"li"},"import _ from 'lodash'"),"."),(0,i.kt)("li",{parentName:"ul"},"The configuration for the external in Webpack. This is ",(0,i.kt)("em",{parentName:"li"},"typically")," the name of the variable (",(0,i.kt)("inlineCode",{parentName:"li"},"_"),"): ",(0,i.kt)("inlineCode",{parentName:"li"},"import _ from 'lodash'"),". Refer to the ",(0,i.kt)("a",{parentName:"li",href:"https://webpack.js.org/configuration/externals"},"externals documentation for Webpack")," for more nuanced information and examples."),(0,i.kt)("li",{parentName:"ul"},"The CDN url from where the CMS will load this dependency.")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},"@js-widgets/webpack-cli")," will set ",(0,i.kt)("inlineCode",{parentName:"p"},"externalsType")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"'window'"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"externalsPresets")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"{ webAsync: true }")," internally. This may have an effect depending on what configuration you set on ",(0,i.kt)("inlineCode",{parentName:"p"},"external"),".")),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  lodash: {\n    src: 'https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js',\n    external: '_',\n  },\n}\n")))}u.isMDXComponent=!0}}]);